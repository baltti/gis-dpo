{"title":"Общие настройки стиля объектов","markdown":{"yaml":{"title":"Общие настройки стиля объектов"},"headingText":"Общие типы стилей","containsRefs":false,"markdown":"\n\nПункт ***Стиль*** в окне свойств слоя предоставляет необходимые инструменты для отрисовки и стилизации векторных слоев. При этом существуют символов и инструменты для работы с векторными данными в целом, а также специальные типы символов, предназначенные для различных геометрий объектов (точек, линий и полигонов).\n\nОднако для всех видов векторных слоев процесс будет повторяться: в верхней части окна содержатся инструменты для классификации и настройки стиля, а в нижней - опции отрисовки слоя.\n\n\nВне зависимости от типа геометрий в слое доступно 4 основных способа отображения объектов:\n\n-   **простой символ** - позволяет отобразить все объекты слоя с использованием одного универсального символа;\n\n-   **уникальные значения** - как правило, используется для категориальной или дискретной переменной с небольшим количеством значений, также может использовать выражение в качестве переменной;\n\n-   **градуированный знак** - для задания символа в зависимости от числовой переменной, также позволяет использовать выражения;\n\n-   **правила** - позволяет задавать символику на основе выражения.\n\n::: callout-note\nСледует отметить, что в QGIS нет типа символа для непрерывных величин, так как здесь они рассматриваются как частный случай градуированного знака.\n:::\n\n## Уникальные значения\n\nПри использовании типа символа *Уникальные значения* в первую очередь следует выбрать переменную, по которой будет осуществляться классификация.\n\nДля такого типа символов следует использовать ***категориальную переменную***, то есть ту, которую нельзя ранжировать по возрастанию.\n\nВ качестве примера таких переменных можно привести:\n\n-   тип здания по функциональному назначению - промышленное, жилое и общественное;\n\n-   тип транспорта - автобус, трамвай, троллейбус;\n\n-   тип почвы - чернозем, подзолистая, серая лесная и прочие.\n\nВместо непосредственно конкретной переменной может быть использовано выражение, что позволяет устранить необходимость создания отдельного атрибута исключительно для символизации слоя и использовать уже имеющиеся.\n\nОтдельно может быть настроен *Символ*, который будет использоваться как базовый для всех классов (в первую очередь эта настройка будет касаться типа заливки и типа контура, а также некоторых других общих параметров).\n\n*Цветовой ряд* используется для символизации разных категорий, кроме того этот тип символа позволяет использовать набор случайных цветов.\n\nТак как тип символа базируется на использовании категориальных переменных, для которых предпочтительно использование цвета как основной визуальной характеристики, палитра случайных цветов в данном случае предпочтительнее, чем готовый градиент.\n\nАвтоматически при классификации будет создан пустой класс *Другие значения*, который впоследствии может быть заполнен объектами со значениями переменной, которых не было в изначальной классификации.\n\n## Градуированный знак\n\nГрадуированный символ может применяться только для числовых показателей, так как предполагает ранжирование по возрастанию и классификацию на группы.\n\nГрадуированные знаки могут использовать не непосредственно значение конкретного атрибута, но вычисляемое выражение.\n\n## Символизация на основе правил\n\nВ качестве правил при символизации выступают выражения, которые позволяют создавать собственные настройки отрисовки для определенных объектов, которые удовлетворяют заданным выражениями условиям.\n\nТак, например, с помощью правила можно установить отрисовку только некоторых объектов соответствующих определенным условиям или исключить из отрисовки объекты, которые не должны быть отображены, или применить специальную символику и отдельные настройки, чтобы выделить на карте только некоторые объекты.\n\n::: callout-tip\nВыражения могут быть вложенными друг в друга, при этом выражения более низкого уровня будут применяться только к тем объектам, которые удовлетворяют условиям выражения более высокого уровня.\n:::\n\n# Типы стилей полигонов\n\nТакже как и для линейных объектов для полигонов доступна символизация с автоматическим объединением объектов, где кроме перечисленных выше исходных символизация добавлена символизация 2.5 D, о которой чуть ниже.\n\n![](images/Снимок%20экрана%202025-06-02%20в%2015.57.44.png){fig-align=\"center\"}\n\nУникальными только для полигональных объектов типами стиля являются:\n\n![](images/Снимок%20экрана%202025-06-23%20в%2013.01.45.png){fig-align=\"center\"}\n\n-   **инвертированные полигоны (inverted polygons)** - позволяет делать заливку не внутрь контура, а вовне. Также как и для символизации с автоматическим объединением объектов остальные типы стилей могут выполнять роль исходной символизации;\n\n![](images/Снимок%20экрана%202025-06-02%20в%2015.58.15.png){fig-align=\"center\"}\n\n-   **2.5 D** - позволяет создать изометрическую проекцию для полигонов.\n\n    ![Источник: https://cartetika.ru/tpost/jc36y7ke41-izometriya-v-qgis-osvaivaem-25d](images/Pasted%20image%2020250602160144.png)\n\nВ изометрической проекции для полигонов доступна дальнейшая настройка символов аналогично символам стандартных полигонов.\n\n# Маски\n\nМаски позволяют настроить наложение символов различных слоев. Это необходимо для улучшения читаемости карты и различения символов различных слоев.\n\nМаски добавляют настраиваемый прозрачный слой вокруг объектов для того, чтобы скрыть часть символов текущего слоя.\n\nВ качестве слоя источника маски может быть задан только слой с точечными объектами. Для слоя источника маски он должен быть установлен как тип слоя символа в настройках стиля, а для того слоя, к которому маска будет применяться, он указывается в настройках маски.\n\n# Настройка стиля объекта в зависимости от атрибута\n\nРассмотрим настройку стиля объектов для жилых многоквартирных зданий по значению этажности.\n\nАтрибут с этажностью - это *building:levels*, но напрямую мы его использовать не можем, так как это текстовый атрибут.\n\n::: callout-note\nЕсли вы хотите узнать типы данных своих атрибутов, вы можете просто открыть свойства слоя на разделе *Поля*, где будут указаны все атрибуты с соответствующими типами данных.\n\n![](images/clipboard-1722627325.png)\n\nТакже в самой таблице атрибутов есть небольшая подсказка: текстовые поля, как правило, выровнены по левому краю, а числовые - по правому.\n:::\n\n## Преобразование строки в число\n\nДля создания нового атрибута с количеством этажей в числовом формате воспользуемся калькулятором полей. Он находится в таблице атрибутов на панели инструментов ![](images/clipboard-1228602271.png){width=\"34\"}.\n\n![](images/clipboard-2249692529.png){fig-align=\"center\" width=\"1097\"}\n\n::: callout-note\nЕсли вы хотите создать новое поле, то для него нужно обязательно указать имя и тип данных, без этого поле создано не будет. *Имя поля должно быть уникальным в пределах таблицы*.\n\nЕсли вы будете записывать результат в уже существующее поле (*Обновить существующее поле*), то удостоверьтесь, что тип данных этого поля соответствует типу данных, который будет получен в результате выражения.\n:::\n\nТак как нам необходимо преобразовать один тип данных в другой, то необходима функция из группы *Преобразования*:\n\n```         \nto_int(\"building:levels\")\n```\n\n![](images/clipboard-1225983304.png)\n\nВ качестве атрибута в эту функцию, необходимо передать строку, но так как нам нужно преобразовать все значения конкретного атрибута, то мы указываем название этого атрибута.\n\nДля того, чтобы не ошибиться в написании названия атрибута/поля, лучше раскрыть группу *Поля и значения* в центре калькулятора полей и выбрать нужное вам двойным кликом.\n\n::: callout-note\n## Обратите внимание\n\nНазвания атрибутов/полей в выражениях указываются в двойных кавычках, а строки - в одинарных.\n:::\n\n::: callout-tip\nЕсли у вас в атрибуте этажности присутствуют значения типа '3.5', то вы можете попробовать воспользоваться функцией `to_real()`, которая преобразовывает строку в десятичное число.\n\nТолько не забудьте указать тип данных для нового поля - *десятичное число*.\n:::\n\nПо результатам применения функции вы получите новое поле, в котором будет содержаться значение этажности в виде числа.\n\n::: callout-important\n## Усложненное задание\n\nПодумайте, как преобразовать этажность с помощью выражения в тех случаях, когда она указана через дефис, например, \"3-5\".\n:::\n\n::: callout-important\n## Усложненное задание\n\nПопробуйте с помощью выражения заполнить пропущенные значения средним значением этажности.\n:::\n\n## Фильтрация данных\n\nВ вашей таблице скорее всего присутствуют пропущенные значения этажности, что же делать с ними? У нас есть несколько путей:\n\n-   просто отбросить объекты с пропущенными значениями атрибутов;\n\n-   найти этажность этих объектов в другом источнике и указать в таблице атрибутов;\n\n-   проставить среднюю этажность в районе/квартале для тех домов, где она пропущена.\n\nМы воспользуемся первым способом, но не будем удалять объекты, а просто скроем их с помощью фильтра.\n\n![](images/clipboard-4270695394.png){fig-align=\"center\" width=\"809\"}\n\nФункция фильтра доступна только для слоев, которые не находятся в режиме редактирования, поэтому необходимо сначала отключить режим редактирования (аналогично тому, как вы его включали), сохранив изменения, а потом воспользоваться фильтром.\n\n![](images/clipboard-2947640405.png){fig-align=\"center\" width=\"1066\"}\n\nВ нашем случае понадобится выражение:\n\n```         \n\"level\" NOT null\n```\n\n::: callout-warning\nЕсли это выражение не работает, можете попробовать альтернативное: `\"level\" > 0.`\n:::\n\nПосле применения фильтра количество объектов на карте и в таблице атрибутов уменьшиться, перестанут отображаться объекты, не соответствующие условию в выражении фильтрации.\n\nТакже справа от названия слоя вы увидите значок ![](images/clipboard-2168316488.png){width=\"36\"}, который предупреждает вас о том, что в этом слое включен фильтр.\n\n## Настройка стиля по диапазонам значений\n\nКак было сказано выше, если мы хотим настроить стиль в зависимости от количественной переменной, необходимо воспользоваться типом стиля *Символизация по диапазонам значений*.\n\nВ качестве значений в данном случае будет выступать наш новый вычисленный числовой атрибут.\n\n::: callout-tip\nВ значении не обязательно использовать конкретный атрибут, здесь также может быть использовано выражение.\n\nТеоретически мы могли не создавать новый атрибут, а просто прописать в значении то же самое выражение, что мы использовали в калькуляторе полей.\n:::\n\n![](images/clipboard-4085917970.png){fig-align=\"center\" width=\"1524\"}\n\n::: callout-warning\nО методах классификации числовых данных мы с вами поговорим далее в курсе, а пока просто создадим классификацию зданий по этажности как указано на картинке выше.\n:::\n\nДля того, чтобы вручную задать диапазоны, вам нужно дважды кликнуть в графе значения в нужной строке и ввести нижнюю и верхнюю границы диапазона.\n\nОпция *Связать границы классов* автоматически изменит соседний диапазон, чтобы между ними не было пробелов.\n\n::: callout-note\nЕсли вы хотите добавить или удалить классы, вы можете сделать это, воспользовавшись кнопками плюса и минуса, расположенными рядом с кнопкой *Классифицировать*.\n:::\n\nИзменение текста легенды происходит аналогично ручному изменению границ классов: двойной клик в графе *Легенда* на нужной строке и введение нужного текста с клавиатуры.\n\n## Символизация на основе правил\n\nЕсли вы все-таки хотите показать не только здания с известной нам этажностью, но и те, для которых этих данных нет, можно воспользоваться символизацией на основе правил.\n\nЧтобы минимизировать работу, продублируем слой с уже настроенной символизацией на основе диапазонов значений.\n\n![](images/clipboard-545308472.png){fig-align=\"center\" width=\"699\"}\n\n::: callout-warning\nДубликат слоя будет ссылаться на тот же самый файл, поэтому если вы будете что-то редактировать в нем (форму объектов, атрибуты), то изменения будут отображаться в обоих слоях.\n:::\n\nДалее отключим фильтр слоя в полученном дубликате. Для этого откроем опцию *Фильтр* и нажмем *Очистить*.\n\n::: callout-warning\nОбъекты с неизвестной этажностью у вас на карте пока не появятся, так как они не попадают ни в один из указанных диапазонов для задания стиля объектам, следовательно, не могут быть отрисованы.\n:::\n\nДля полученного дубликата слоя выберем *Символизация на основе правил*. Так как у нас уже была настроена символизация по диапазонам первые три правила будут указана автоматически, вам необходимо добавить еще одно.\n\n![](images/clipboard-3472664790.png)\n\nДля этого нужно нажать на ![](images/clipboard-2350716054.png){width=\"38\" height=\"32\"}, после чего в открывшемся окне указать подпись (то, что будет использоваться легенде) и выражение для правила: `\"level\" is null`.\n\n![](images/clipboard-378074760.png){fig-align=\"center\" width=\"1288\"}\n\nДля создания выражения, вы можете воспользоваться конструктором, который открывается нажатием кнопки ![](images/clipboard-2105348756.png){width=\"44\" height=\"41\"}. Этот конструктор аналогичен конструктору выражений в калькуляторе полей (за исключением создания нового поля или записи результата в существующее поле, так как это выражение не будет влиять на содержание таблицы атрибутов).\n\n![](images/clipboard-2088068667.png){fig-align=\"center\" width=\"1450\"}\n\nВ окне для задания правила вы можете выбрать цвет заливки для этих зданий так, чтобы он отличался от остальных.\n\n![](images/clipboard-887581310.png){fig-align=\"center\" width=\"1235\"}\n\n# Импорт готовых стилей\n\nВ QGIS кроме того, что мы можем самостоятельно создавать и настраивать стили, можно импортировать уже готовые стили или экспортировать созданные[^1].\n\n[^1]: **Sharing style items** <https://docs.qgis.org/3.16/en/docs/user_manual/style_library/style_manager.html#sharing-style-items>\n\nЭто возможно благодаря тому, что описание стиля можно сохранить в формате XML.\n\nГотовые стили можно скачать [здесь](https://plugins.qgis.org/styles/) или взять на гитхабе в [подборке](https://github.com/tjukanovt/qgis_styles) Топи Тюканова.\n\nКроме того, есть еще ресурс [QGIS Style hub](http://qgis-hub.fast-page.org/styles.php).\n\n::: callout-caution\nОбратите внимание, что некоторые стили могут иметь ограничения по типу объектов, к которым они применяются, и, в некоторых случаях, по типу системы координат, в которой должен быть слой.\n\nНапример, стиль слоя с выносками размеров применим только для слоев в *прямоугольной (спроецированной) системе координат*, так как он использует метрические единицы.\n:::\n\nКак загрузить стили по ссылке можно посмотреть в видео:\n\n```{=html}\n<iframe width=\"800\" height=\"400\" src=\"https://www.youtube.com/embed/zZW97unRBRw?si=SirM2CSJvJVJDLjn\" title=\"YouTube video player\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\" referrerpolicy=\"strict-origin-when-cross-origin\" allowfullscreen>\n</iframe>\n```\n\nЗагрузка готовых стилей из файла происходит аналогично, отличие только в том, что в качестве источника выбирается не URL, а файл.\n\nТакже можно пользоваться плагином [QGIS Resource sharing](https://plugins.qgis.org/plugins/qgis_resource_sharing/)\n","srcMarkdownNoYaml":"\n\nПункт ***Стиль*** в окне свойств слоя предоставляет необходимые инструменты для отрисовки и стилизации векторных слоев. При этом существуют символов и инструменты для работы с векторными данными в целом, а также специальные типы символов, предназначенные для различных геометрий объектов (точек, линий и полигонов).\n\nОднако для всех видов векторных слоев процесс будет повторяться: в верхней части окна содержатся инструменты для классификации и настройки стиля, а в нижней - опции отрисовки слоя.\n\n# Общие типы стилей\n\nВне зависимости от типа геометрий в слое доступно 4 основных способа отображения объектов:\n\n-   **простой символ** - позволяет отобразить все объекты слоя с использованием одного универсального символа;\n\n-   **уникальные значения** - как правило, используется для категориальной или дискретной переменной с небольшим количеством значений, также может использовать выражение в качестве переменной;\n\n-   **градуированный знак** - для задания символа в зависимости от числовой переменной, также позволяет использовать выражения;\n\n-   **правила** - позволяет задавать символику на основе выражения.\n\n::: callout-note\nСледует отметить, что в QGIS нет типа символа для непрерывных величин, так как здесь они рассматриваются как частный случай градуированного знака.\n:::\n\n## Уникальные значения\n\nПри использовании типа символа *Уникальные значения* в первую очередь следует выбрать переменную, по которой будет осуществляться классификация.\n\nДля такого типа символов следует использовать ***категориальную переменную***, то есть ту, которую нельзя ранжировать по возрастанию.\n\nВ качестве примера таких переменных можно привести:\n\n-   тип здания по функциональному назначению - промышленное, жилое и общественное;\n\n-   тип транспорта - автобус, трамвай, троллейбус;\n\n-   тип почвы - чернозем, подзолистая, серая лесная и прочие.\n\nВместо непосредственно конкретной переменной может быть использовано выражение, что позволяет устранить необходимость создания отдельного атрибута исключительно для символизации слоя и использовать уже имеющиеся.\n\nОтдельно может быть настроен *Символ*, который будет использоваться как базовый для всех классов (в первую очередь эта настройка будет касаться типа заливки и типа контура, а также некоторых других общих параметров).\n\n*Цветовой ряд* используется для символизации разных категорий, кроме того этот тип символа позволяет использовать набор случайных цветов.\n\nТак как тип символа базируется на использовании категориальных переменных, для которых предпочтительно использование цвета как основной визуальной характеристики, палитра случайных цветов в данном случае предпочтительнее, чем готовый градиент.\n\nАвтоматически при классификации будет создан пустой класс *Другие значения*, который впоследствии может быть заполнен объектами со значениями переменной, которых не было в изначальной классификации.\n\n## Градуированный знак\n\nГрадуированный символ может применяться только для числовых показателей, так как предполагает ранжирование по возрастанию и классификацию на группы.\n\nГрадуированные знаки могут использовать не непосредственно значение конкретного атрибута, но вычисляемое выражение.\n\n## Символизация на основе правил\n\nВ качестве правил при символизации выступают выражения, которые позволяют создавать собственные настройки отрисовки для определенных объектов, которые удовлетворяют заданным выражениями условиям.\n\nТак, например, с помощью правила можно установить отрисовку только некоторых объектов соответствующих определенным условиям или исключить из отрисовки объекты, которые не должны быть отображены, или применить специальную символику и отдельные настройки, чтобы выделить на карте только некоторые объекты.\n\n::: callout-tip\nВыражения могут быть вложенными друг в друга, при этом выражения более низкого уровня будут применяться только к тем объектам, которые удовлетворяют условиям выражения более высокого уровня.\n:::\n\n# Типы стилей полигонов\n\nТакже как и для линейных объектов для полигонов доступна символизация с автоматическим объединением объектов, где кроме перечисленных выше исходных символизация добавлена символизация 2.5 D, о которой чуть ниже.\n\n![](images/Снимок%20экрана%202025-06-02%20в%2015.57.44.png){fig-align=\"center\"}\n\nУникальными только для полигональных объектов типами стиля являются:\n\n![](images/Снимок%20экрана%202025-06-23%20в%2013.01.45.png){fig-align=\"center\"}\n\n-   **инвертированные полигоны (inverted polygons)** - позволяет делать заливку не внутрь контура, а вовне. Также как и для символизации с автоматическим объединением объектов остальные типы стилей могут выполнять роль исходной символизации;\n\n![](images/Снимок%20экрана%202025-06-02%20в%2015.58.15.png){fig-align=\"center\"}\n\n-   **2.5 D** - позволяет создать изометрическую проекцию для полигонов.\n\n    ![Источник: https://cartetika.ru/tpost/jc36y7ke41-izometriya-v-qgis-osvaivaem-25d](images/Pasted%20image%2020250602160144.png)\n\nВ изометрической проекции для полигонов доступна дальнейшая настройка символов аналогично символам стандартных полигонов.\n\n# Маски\n\nМаски позволяют настроить наложение символов различных слоев. Это необходимо для улучшения читаемости карты и различения символов различных слоев.\n\nМаски добавляют настраиваемый прозрачный слой вокруг объектов для того, чтобы скрыть часть символов текущего слоя.\n\nВ качестве слоя источника маски может быть задан только слой с точечными объектами. Для слоя источника маски он должен быть установлен как тип слоя символа в настройках стиля, а для того слоя, к которому маска будет применяться, он указывается в настройках маски.\n\n# Настройка стиля объекта в зависимости от атрибута\n\nРассмотрим настройку стиля объектов для жилых многоквартирных зданий по значению этажности.\n\nАтрибут с этажностью - это *building:levels*, но напрямую мы его использовать не можем, так как это текстовый атрибут.\n\n::: callout-note\nЕсли вы хотите узнать типы данных своих атрибутов, вы можете просто открыть свойства слоя на разделе *Поля*, где будут указаны все атрибуты с соответствующими типами данных.\n\n![](images/clipboard-1722627325.png)\n\nТакже в самой таблице атрибутов есть небольшая подсказка: текстовые поля, как правило, выровнены по левому краю, а числовые - по правому.\n:::\n\n## Преобразование строки в число\n\nДля создания нового атрибута с количеством этажей в числовом формате воспользуемся калькулятором полей. Он находится в таблице атрибутов на панели инструментов ![](images/clipboard-1228602271.png){width=\"34\"}.\n\n![](images/clipboard-2249692529.png){fig-align=\"center\" width=\"1097\"}\n\n::: callout-note\nЕсли вы хотите создать новое поле, то для него нужно обязательно указать имя и тип данных, без этого поле создано не будет. *Имя поля должно быть уникальным в пределах таблицы*.\n\nЕсли вы будете записывать результат в уже существующее поле (*Обновить существующее поле*), то удостоверьтесь, что тип данных этого поля соответствует типу данных, который будет получен в результате выражения.\n:::\n\nТак как нам необходимо преобразовать один тип данных в другой, то необходима функция из группы *Преобразования*:\n\n```         \nto_int(\"building:levels\")\n```\n\n![](images/clipboard-1225983304.png)\n\nВ качестве атрибута в эту функцию, необходимо передать строку, но так как нам нужно преобразовать все значения конкретного атрибута, то мы указываем название этого атрибута.\n\nДля того, чтобы не ошибиться в написании названия атрибута/поля, лучше раскрыть группу *Поля и значения* в центре калькулятора полей и выбрать нужное вам двойным кликом.\n\n::: callout-note\n## Обратите внимание\n\nНазвания атрибутов/полей в выражениях указываются в двойных кавычках, а строки - в одинарных.\n:::\n\n::: callout-tip\nЕсли у вас в атрибуте этажности присутствуют значения типа '3.5', то вы можете попробовать воспользоваться функцией `to_real()`, которая преобразовывает строку в десятичное число.\n\nТолько не забудьте указать тип данных для нового поля - *десятичное число*.\n:::\n\nПо результатам применения функции вы получите новое поле, в котором будет содержаться значение этажности в виде числа.\n\n::: callout-important\n## Усложненное задание\n\nПодумайте, как преобразовать этажность с помощью выражения в тех случаях, когда она указана через дефис, например, \"3-5\".\n:::\n\n::: callout-important\n## Усложненное задание\n\nПопробуйте с помощью выражения заполнить пропущенные значения средним значением этажности.\n:::\n\n## Фильтрация данных\n\nВ вашей таблице скорее всего присутствуют пропущенные значения этажности, что же делать с ними? У нас есть несколько путей:\n\n-   просто отбросить объекты с пропущенными значениями атрибутов;\n\n-   найти этажность этих объектов в другом источнике и указать в таблице атрибутов;\n\n-   проставить среднюю этажность в районе/квартале для тех домов, где она пропущена.\n\nМы воспользуемся первым способом, но не будем удалять объекты, а просто скроем их с помощью фильтра.\n\n![](images/clipboard-4270695394.png){fig-align=\"center\" width=\"809\"}\n\nФункция фильтра доступна только для слоев, которые не находятся в режиме редактирования, поэтому необходимо сначала отключить режим редактирования (аналогично тому, как вы его включали), сохранив изменения, а потом воспользоваться фильтром.\n\n![](images/clipboard-2947640405.png){fig-align=\"center\" width=\"1066\"}\n\nВ нашем случае понадобится выражение:\n\n```         \n\"level\" NOT null\n```\n\n::: callout-warning\nЕсли это выражение не работает, можете попробовать альтернативное: `\"level\" > 0.`\n:::\n\nПосле применения фильтра количество объектов на карте и в таблице атрибутов уменьшиться, перестанут отображаться объекты, не соответствующие условию в выражении фильтрации.\n\nТакже справа от названия слоя вы увидите значок ![](images/clipboard-2168316488.png){width=\"36\"}, который предупреждает вас о том, что в этом слое включен фильтр.\n\n## Настройка стиля по диапазонам значений\n\nКак было сказано выше, если мы хотим настроить стиль в зависимости от количественной переменной, необходимо воспользоваться типом стиля *Символизация по диапазонам значений*.\n\nВ качестве значений в данном случае будет выступать наш новый вычисленный числовой атрибут.\n\n::: callout-tip\nВ значении не обязательно использовать конкретный атрибут, здесь также может быть использовано выражение.\n\nТеоретически мы могли не создавать новый атрибут, а просто прописать в значении то же самое выражение, что мы использовали в калькуляторе полей.\n:::\n\n![](images/clipboard-4085917970.png){fig-align=\"center\" width=\"1524\"}\n\n::: callout-warning\nО методах классификации числовых данных мы с вами поговорим далее в курсе, а пока просто создадим классификацию зданий по этажности как указано на картинке выше.\n:::\n\nДля того, чтобы вручную задать диапазоны, вам нужно дважды кликнуть в графе значения в нужной строке и ввести нижнюю и верхнюю границы диапазона.\n\nОпция *Связать границы классов* автоматически изменит соседний диапазон, чтобы между ними не было пробелов.\n\n::: callout-note\nЕсли вы хотите добавить или удалить классы, вы можете сделать это, воспользовавшись кнопками плюса и минуса, расположенными рядом с кнопкой *Классифицировать*.\n:::\n\nИзменение текста легенды происходит аналогично ручному изменению границ классов: двойной клик в графе *Легенда* на нужной строке и введение нужного текста с клавиатуры.\n\n## Символизация на основе правил\n\nЕсли вы все-таки хотите показать не только здания с известной нам этажностью, но и те, для которых этих данных нет, можно воспользоваться символизацией на основе правил.\n\nЧтобы минимизировать работу, продублируем слой с уже настроенной символизацией на основе диапазонов значений.\n\n![](images/clipboard-545308472.png){fig-align=\"center\" width=\"699\"}\n\n::: callout-warning\nДубликат слоя будет ссылаться на тот же самый файл, поэтому если вы будете что-то редактировать в нем (форму объектов, атрибуты), то изменения будут отображаться в обоих слоях.\n:::\n\nДалее отключим фильтр слоя в полученном дубликате. Для этого откроем опцию *Фильтр* и нажмем *Очистить*.\n\n::: callout-warning\nОбъекты с неизвестной этажностью у вас на карте пока не появятся, так как они не попадают ни в один из указанных диапазонов для задания стиля объектам, следовательно, не могут быть отрисованы.\n:::\n\nДля полученного дубликата слоя выберем *Символизация на основе правил*. Так как у нас уже была настроена символизация по диапазонам первые три правила будут указана автоматически, вам необходимо добавить еще одно.\n\n![](images/clipboard-3472664790.png)\n\nДля этого нужно нажать на ![](images/clipboard-2350716054.png){width=\"38\" height=\"32\"}, после чего в открывшемся окне указать подпись (то, что будет использоваться легенде) и выражение для правила: `\"level\" is null`.\n\n![](images/clipboard-378074760.png){fig-align=\"center\" width=\"1288\"}\n\nДля создания выражения, вы можете воспользоваться конструктором, который открывается нажатием кнопки ![](images/clipboard-2105348756.png){width=\"44\" height=\"41\"}. Этот конструктор аналогичен конструктору выражений в калькуляторе полей (за исключением создания нового поля или записи результата в существующее поле, так как это выражение не будет влиять на содержание таблицы атрибутов).\n\n![](images/clipboard-2088068667.png){fig-align=\"center\" width=\"1450\"}\n\nВ окне для задания правила вы можете выбрать цвет заливки для этих зданий так, чтобы он отличался от остальных.\n\n![](images/clipboard-887581310.png){fig-align=\"center\" width=\"1235\"}\n\n# Импорт готовых стилей\n\nВ QGIS кроме того, что мы можем самостоятельно создавать и настраивать стили, можно импортировать уже готовые стили или экспортировать созданные[^1].\n\n[^1]: **Sharing style items** <https://docs.qgis.org/3.16/en/docs/user_manual/style_library/style_manager.html#sharing-style-items>\n\nЭто возможно благодаря тому, что описание стиля можно сохранить в формате XML.\n\nГотовые стили можно скачать [здесь](https://plugins.qgis.org/styles/) или взять на гитхабе в [подборке](https://github.com/tjukanovt/qgis_styles) Топи Тюканова.\n\nКроме того, есть еще ресурс [QGIS Style hub](http://qgis-hub.fast-page.org/styles.php).\n\n::: callout-caution\nОбратите внимание, что некоторые стили могут иметь ограничения по типу объектов, к которым они применяются, и, в некоторых случаях, по типу системы координат, в которой должен быть слой.\n\nНапример, стиль слоя с выносками размеров применим только для слоев в *прямоугольной (спроецированной) системе координат*, так как он использует метрические единицы.\n:::\n\nКак загрузить стили по ссылке можно посмотреть в видео:\n\n```{=html}\n<iframe width=\"800\" height=\"400\" src=\"https://www.youtube.com/embed/zZW97unRBRw?si=SirM2CSJvJVJDLjn\" title=\"YouTube video player\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\" referrerpolicy=\"strict-origin-when-cross-origin\" allowfullscreen>\n</iframe>\n```\n\nЗагрузка готовых стилей из файла происходит аналогично, отличие только в том, что в качестве источника выбирается не URL, а файл.\n\nТакже можно пользоваться плагином [QGIS Resource sharing](https://plugins.qgis.org/plugins/qgis_resource_sharing/)\n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"markdown"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["styles.css"],"toc":true,"output-file":"style.html"},"language":{"toc-title-document":"Содержание","toc-title-website":"Содержание","related-formats-title":"Другие форматы","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Источник","other-links-title":"Другие ссылки","code-links-title":"Ссылки на код","launch-dev-container-title":"Запустить Dev Container","launch-binder-title":"Запустить Binder","article-notebook-label":"Блокнот статьи","notebook-preview-download":"Скачать блокнот","notebook-preview-download-src":"Скачать исходный код","notebook-preview-back":"Вернуться к статье","manuscript-meca-bundle":"Архив MECA","section-title-abstract":"Аннотация","section-title-appendices":"Приложения","section-title-footnotes":"Сноски","section-title-references":"использованная литература","section-title-reuse":"Повторное использование","section-title-copyright":"Авторские права","section-title-citation":"Цитата","appendix-attribution-cite-as":"Пожалуйста, цитируйте эту работу как:","appendix-attribution-bibtex":"BibTeX","appendix-view-license":"Просмотреть Лицензию","title-block-author-single":"АВТОР","title-block-author-plural":"Авторы","title-block-affiliation-single":"Организация","title-block-affiliation-plural":"Принадлежности","title-block-published":"Дата публикации","title-block-modified":"Файл изменен","title-block-keywords":"Ключевые слова","callout-tip-title":"Дополнительно","callout-note-title":"На заметку","callout-warning-title":"Внимание","callout-important-title":"Важно","callout-caution-title":"Предупреждение","code-summary":"Код","code-tools-menu-caption":"Код","code-tools-show-all-code":"Развернуть код","code-tools-hide-all-code":"Скрыть код","code-tools-view-source":"Показать код","code-tools-source-code":"Исходный код","tools-share":"Share","tools-download":"Download","code-line":"Линия","code-lines":"Линии","copy-button-tooltip":"Скопировать текст","copy-button-tooltip-success":"Скопировано","repo-action-links-edit":"Редактировать страницу","repo-action-links-source":"Показать код","repo-action-links-issue":"Сообщить о проблеме","back-to-top":"Наверх","search-no-results-text":"Поиск не дал результатов","search-matching-documents-text":"Результаты поиска","search-copy-link-title":"Скопировать ссылку","search-hide-matches-text":"Скрыть дополнительные результаты","search-more-match-text":"дополнительный результат в этом документе","search-more-matches-text":"дополнительных результата(-ов) в этом документе","search-clear-button-title":"Очистить","search-text-placeholder":"","search-detached-cancel-button-title":"Отменить","search-submit-button-title":"Найти","search-label":"Поиск","toggle-section":"Переключить раздел","toggle-sidebar":"Переключить боковую панель навигации","toggle-dark-mode":"Переключить темный режим","toggle-reader-mode":"Переключить режим чтения","toggle-navigation":"Переключить навигацию","crossref-fig-title":"Рисунок","crossref-tbl-title":"Таблица","crossref-lst-title":"Список","crossref-thm-title":"Теорема","crossref-lem-title":"Лемма","crossref-cor-title":"Следствие","crossref-prp-title":"Утверждение","crossref-cnj-title":"Гипотеза","crossref-def-title":"Определение","crossref-exm-title":"Пример","crossref-exr-title":"Упражнение","crossref-ch-prefix":"Глава","crossref-apx-prefix":"Приложение","crossref-sec-prefix":"Глава","crossref-eq-prefix":"Уравнение","crossref-lof-title":"Список Иллюстраций","crossref-lot-title":"Список Таблиц","crossref-lol-title":"Список Каталогов","environment-proof-title":"Доказательство","environment-remark-title":"Примечание","environment-solution-title":"Решение","listing-page-order-by":"Сортировать по","listing-page-order-by-default":"предварительно выбранный","listing-page-order-by-date-asc":"Самый старый","listing-page-order-by-date-desc":"Новейшие","listing-page-order-by-number-desc":"нисходящий","listing-page-order-by-number-asc":"по возрастанию","listing-page-field-date":"Дата","listing-page-field-title":"Заголовок","listing-page-field-description":"Описание","listing-page-field-author":"Автор","listing-page-field-filename":"Имя файла","listing-page-field-filemodified":"Файл изменен","listing-page-field-subtitle":"Подзаголовок","listing-page-field-readingtime":"Время чтения","listing-page-field-wordcount":"Подсчет слов","listing-page-field-categories":"Категории","listing-page-minutes-compact":"{0} минут","listing-page-category-all":"Все","listing-page-no-matches":"Нет подходящих элементов","listing-page-words":"{0} слов","listing-page-filter":"Фильтр","draft":"Черновик"},"metadata":{"lang":"ru-RU","fig-responsive":true,"quarto-version":"1.7.32","editor":"visual","theme":"flatly","title":"Общие настройки стиля объектов"},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}